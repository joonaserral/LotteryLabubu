<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labubu å¥‡å¦™å•†åŸ ğŸ§¸ - è¿ªå£«å°¼å®˜æ–¹æˆæƒ</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§¸</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --labu: #6b5b95;
            --labu2: #ffcc00;
            --disney-blue: #0066cc;
            --disney-red: #ff0040;
        }

        .labu-gradient {
            background-image: linear-gradient(135deg, rgba(107, 91, 149, .15), rgba(255, 204, 0, .15));
        }

        .disney-gradient {
            background: linear-gradient(45deg, var(--disney-blue), var(--disney-red));
        }

        .sparkle {
            animation: sparkle 2s ease-in-out infinite alternate;
        }

        @keyframes sparkle {
            0% {
                transform: scale(1) rotate(0deg);
            }

            100% {
                transform: scale(1.1) rotate(5deg);
            }
        }

        /* è‡ªå®šä¹‰é¼ æ ‡æ ·å¼ */
        * {
            cursor: none !important;
        }

        /* æ¢å¤æ–‡æœ¬è¾“å…¥å…ƒç´ çš„å…‰æ ‡ */
        input,
        textarea,
        [contenteditable="true"],
        .text-input {
            cursor: text !important;
        }

        /* æ¢å¤å¯ç‚¹å‡»å…ƒç´ çš„å…‰æ ‡ */
        button,
        a,
        [role="button"],
        .cursor-pointer,
        select {
            cursor: pointer !important;
        }

        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff69b4"><path d="M8 2C8 2 8.5 3 10.5 3C12.5 3 13 2 13 2C14 2 15 3 15 4C15 5 14 6 13 6C12 6 11 7 11 8C11 9 12 10 13 10C14 10 15 9 15 8C15 7 16 6 17 6C18 6 19 7 19 8C19 9 18 10 17 10C16 10 15 11 15 12C15 13 16 14 17 14C18 14 19 13 19 12C19 11 20 10 21 10C22 10 23 11 23 12C23 13 22 14 21 14C20 14 19 15 19 16C19 17 18 18 17 18C16 18 15 17 15 16C15 15 14 14 13 14C12 14 11 15 11 16C11 17 10 18 9 18C8 18 7 17 7 16C7 15 8 14 9 14C10 14 11 13 11 12C11 11 10 10 9 10C8 10 7 11 7 12C7 13 6 14 5 14C4 14 3 13 3 12C3 11 4 10 5 10C6 10 7 9 7 8C7 7 6 6 5 6C4 6 3 7 3 8C3 9 2 10 1 10C0 10 -1 9 -1 8C-1 7 0 6 1 6C2 6 3 5 3 4C3 3 4 2 5 2C6 2 7 3 7 4C7 5 8 6 9 6C10 6 11 5 11 4C11 3 10 2 9 2C8.5 2 8 2 8 2Z"/></svg>') no-repeat center;
            background-size: contain;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s ease;
            transform: translate(-50%, -50%);
        }

        .custom-cursor.clicking {
            transform: translate(-50%, -50%) scale(1.2);
        }

        .cursor-trail {
            position: fixed;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255, 105, 180, 0.8) 0%, rgba(255, 105, 180, 0) 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            animation: cursorTrailFade 0.5s ease-out forwards;
        }

        @keyframes cursorTrailFade {
            0% {
                opacity: 1;
                transform: scale(1);
            }

            100% {
                opacity: 0;
                transform: scale(0.3);
            }
        }

        /* å•†å“å¡ç‰‡åŠ¨ç”» */
        .product-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        /* ä»·æ ¼æ ‡ç­¾åŠ¨ç”» */
        .price-tag {
            background: linear-gradient(45deg, #ff6b6b, #ff8787);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        /* åˆ†ç±»æ ‡ç­¾ */
        .category-tag {
            background: linear-gradient(45deg, var(--labu), var(--labu2));
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* æ˜Ÿçº§è¯„ä»· */
        .stars {
            color: #ffd700;
        }

        /* è´­ç‰©è½¦æŒ‰é’® */
        .cart-btn {
            background: linear-gradient(45deg, var(--disney-blue), var(--disney-red));
            transition: all 0.3s ease;
        }

        .cart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 102, 204, 0.3);
        }

        /* æœç´¢æ¡†åŠ¨ç”» */
        .search-box {
            transition: all 0.3s ease;
        }

        .search-box:focus {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(107, 91, 149, 0.2);
        }

        /* è½®æ’­å›¾åŠ¨ç”» */
        .carousel-item {
            transition: opacity 0.5s ease-in-out;
        }

        /* ç‰¹æ•ˆç²’å­ */
        .magic-particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #ffd700 0%, #ff69b4 50%, transparent 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9997;
            animation: magicParticle 2s ease-out forwards;
        }

        @keyframes magicParticle {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }

            50% {
                opacity: 1;
                transform: scale(1) rotate(180deg);
            }

            100% {
                opacity: 0;
                transform: scale(0.2) rotate(360deg) translateY(-50px);
            }
        }

        /* æŒ‰é’®å¢å¼ºæ•ˆæœ */
        .enhanced-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .enhanced-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .enhanced-btn:hover::before {
            left: 100%;
        }

        .enhanced-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(107, 91, 149, 0.3);
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900">
    <!-- è‡ªå®šä¹‰é¼ æ ‡å…‰æ ‡ -->
    <div class="custom-cursor"></div>

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="sticky top-0 z-30 backdrop-blur bg-white/90 border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 rounded-xl disney-gradient grid place-content-center text-white text-xl sparkle">
                        ğŸ§¸
                    </div>
                    <div>
                        <h1 class="font-bold text-lg">Labubu å¥‡å¦™å•†åŸ</h1>
                        <p class="text-xs text-slate-500">è¿ªå£«å°¼å®˜æ–¹æˆæƒ âœ¨</p>
                    </div>
                </div>

                <!-- æœç´¢æ¡† -->
                <div class="flex-1 max-w-md mx-8">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="æœç´¢ä½ å–œæ¬¢çš„Labubu..."
                            class="search-box w-full px-4 py-2 pl-10 rounded-full border border-slate-300 focus:border-[var(--labu)] focus:outline-none">
                        <div class="absolute left-3 top-2.5 text-slate-400">ğŸ”</div>
                    </div>
                </div>

                <!-- å¯¼èˆªé“¾æ¥ -->
                <nav class="flex items-center gap-6">
                    <a href="index.html" class="text-slate-600 hover:text-[var(--labu)] transition-colors">ğŸ¯ æŠ½å¥–</a>
                    <a href="achievements.html" class="text-slate-600 hover:text-[var(--labu)] transition-colors">ğŸ†
                        ä¸ªäººæˆå°±</a>
                    <button id="addPrizeBtn" class="text-slate-600 hover:text-[var(--labu)] transition-colors">
                        â• æ·»åŠ å¥–å“
                    </button>
                    <div class="relative">
                        <button id="cartBtn" class="text-slate-600 hover:text-[var(--labu)] transition-colors">
                            ğŸ›’ è´­ç‰©è½¦ <span id="cartCount"
                                class="bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5 ml-1">0</span>
                        </button>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- è½®æ’­æ¨ªå¹… -->
    <section class="relative overflow-hidden">
        <div id="carousel" class="flex transition-transform duration-500 ease-in-out">
            <div class="carousel-item min-w-full h-64 disney-gradient flex items-center justify-center text-white">
                <div class="text-center">
                    <h2 class="text-4xl font-bold mb-2">ğŸª Labubu å¥‡å¦™ä¸–ç•Œ</h2>
                    <p class="text-xl opacity-90">æ¢ç´¢è¿ªå£«å°¼å®˜æ–¹æˆæƒçš„é­…åŠ›æ”¶è—</p>
                </div>
            </div>
            <div class="carousel-item min-w-full h-64 labu-gradient flex items-center justify-center">
                <div class="text-center">
                    <h2 class="text-4xl font-bold mb-2">âœ¨ é™å®šç³»åˆ—ä¸Šæ–°</h2>
                    <p class="text-xl text-slate-700">é”™è¿‡å°±è¦ç­‰ä¸€å¹´çš„ä¸“å±æ¬¾å¼</p>
                </div>
            </div>
            <div
                class="carousel-item min-w-full h-64 bg-gradient-to-r from-pink-400 to-purple-500 flex items-center justify-center text-white">
                <div class="text-center">
                    <h2 class="text-4xl font-bold mb-2">ğŸ æ–°ç”¨æˆ·ä¸“äº«</h2>
                    <p class="text-xl opacity-90">æ³¨å†Œå³é€ç¥ç§˜ç›²ç›’ä¸€ä¸ª</p>
                </div>
            </div>
        </div>

        <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
            <button class="carousel-dot w-3 h-3 rounded-full bg-white/50" data-slide="0"></button>
            <button class="carousel-dot w-3 h-3 rounded-full bg-white/50" data-slide="1"></button>
            <button class="carousel-dot w-3 h-3 rounded-full bg-white/50" data-slide="2"></button>
        </div>
    </section>

    <!-- åˆ†ç±»å¯¼èˆª -->
    <section class="py-6 bg-white border-b">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-center gap-6 overflow-x-auto">
                <button
                    class="category-btn flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 transition-colors"
                    data-category="all">
                    <div class="text-3xl">ğŸ§¸</div>
                    <span class="text-sm font-medium">å…¨éƒ¨å•†å“</span>
                </button>
                <button
                    class="category-btn flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 transition-colors"
                    data-category="custom">
                    <div class="text-3xl">ğŸ’</div>
                    <span class="text-sm font-medium">æˆ‘çš„å¥–å“</span>
                </button>
                <button
                    class="category-btn flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 transition-colors"
                    data-category="classic">
                    <div class="text-3xl">â­</div>
                    <span class="text-sm font-medium">ç»å…¸ç³»åˆ—</span>
                </button>
                <button
                    class="category-btn flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 transition-colors"
                    data-category="limited">
                    <div class="text-3xl">ğŸ’</div>
                    <span class="text-sm font-medium">é™å®šæ¬¾</span>
                </button>
                <button
                    class="category-btn flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 transition-colors"
                    data-category="blind">
                    <div class="text-3xl">ğŸ</div>
                    <span class="text-sm font-medium">ç›²ç›’ç³»åˆ—</span>
                </button>
                <button
                    class="category-btn flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 transition-colors"
                    data-category="accessories">
                    <div class="text-3xl">ğŸ‘œ</div>
                    <span class="text-sm font-medium">å‘¨è¾¹é…ä»¶</span>
                </button>
            </div>
        </div>
    </section>

    <!-- å•†å“å±•ç¤ºåŒº -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <!-- ç­›é€‰å’Œæ’åº -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center gap-4">
                <span class="text-slate-600">å…±æ‰¾åˆ° <span id="productCount">24</span> ä»¶å•†å“</span>
                <div class="flex items-center gap-2">
                    <span class="text-sm text-slate-500">ä»·æ ¼ç­›é€‰:</span>
                    <select id="priceFilter" class="px-3 py-1 border border-slate-300 rounded text-sm">
                        <option value="all">å…¨éƒ¨ä»·æ ¼</option>
                        <option value="0-50">ï¿¥0-50</option>
                        <option value="50-100">ï¿¥50-100</option>
                        <option value="100-200">ï¿¥100-200</option>
                        <option value="200+">ï¿¥200ä»¥ä¸Š</option>
                    </select>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-slate-500">æ’åº:</span>
                <select id="sortBy" class="px-3 py-1 border border-slate-300 rounded text-sm">
                    <option value="default">é»˜è®¤æ’åº</option>
                    <option value="price-low">ä»·æ ¼ä»ä½åˆ°é«˜</option>
                    <option value="price-high">ä»·æ ¼ä»é«˜åˆ°ä½</option>
                    <option value="rating">å¥½è¯„ä¼˜å…ˆ</option>
                    <option value="sales">é”€é‡ä¼˜å…ˆ</option>
                </select>
            </div>
        </div>

        <!-- å•†å“ç½‘æ ¼ -->
        <div id="productGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            <!-- å•†å“å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- åŠ è½½æ›´å¤š -->
        <div class="text-center mt-12">
            <button id="loadMore" class="enhanced-btn px-8 py-3 bg-[var(--labu)] text-white rounded-full font-medium">
                åŠ è½½æ›´å¤šå•†å“ âœ¨
            </button>
        </div>
    </main>

    <!-- è´­ç‰©è½¦ä¾§è¾¹æ  -->
    <div id="cartSidebar"
        class="fixed right-0 top-0 h-full w-80 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-40">
        <div class="p-6 border-b">
            <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">ğŸ›’ è´­ç‰©è½¦</h3>
                <button id="closeCart" class="text-slate-400 hover:text-slate-600">âœ•</button>
            </div>
        </div>
        <div id="cartItems" class="flex-1 overflow-y-auto p-6">
            <div class="text-center text-slate-400 py-8">
                <div class="text-4xl mb-2">ğŸ›’</div>
                <p>è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ</p>
                <p class="text-sm mt-1">å¿«å»æŒ‘é€‰ä½ å–œæ¬¢çš„Labubuå§ï¼</p>
            </div>
        </div>
        <div class="p-6 border-t">
            <div class="flex justify-between items-center mb-4">
                <span class="font-semibold">æ€»è®¡:</span>
                <span id="cartTotal" class="text-xl font-bold text-[var(--labu)]">ï¿¥0</span>
            </div>
            <button class="cart-btn w-full py-3 text-white rounded-xl font-medium">
                ç«‹å³ç»“ç®— ğŸ’³
            </button>
        </div>
    </div>

    <!-- èƒŒæ™¯é®ç½© -->
    <div id="cartOverlay" class="fixed inset-0 bg-black/50 hidden z-30"></div>

    <!-- æ·»åŠ å¥–å“æ¨¡æ€æ¡† -->
    <div id="addPrizeModal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-slate-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-bold text-slate-800">âœ¨ æ·»åŠ è‡ªå®šä¹‰å¥–å“</h3>
                    <button id="closePrizeModal" class="text-slate-400 hover:text-slate-600 text-2xl">Ã—</button>
                </div>
                <p class="text-sm text-slate-600 mt-2">åˆ›å»ºä½ çš„ä¸“å±å¥–å“ï¼Œè®©å•†åŸæ›´åŠ ä¸°å¯Œï¼</p>
            </div>

            <form id="addPrizeForm" class="p-6 space-y-6">
                <!-- å¥–å“å›¾ç‰‡ä¸Šä¼  -->
                <div class="space-y-3">
                    <label class="block text-sm font-medium text-slate-700">ğŸ–¼ï¸ å¥–å“å›¾ç‰‡</label>
                    <div class="flex gap-4">
                        <div class="flex-1">
                            <div id="imagePreview"
                                class="w-full h-32 border-2 border-dashed border-slate-300 rounded-xl flex items-center justify-center text-slate-400 bg-slate-50">
                                <div class="text-center">
                                    <div class="text-3xl mb-2">ğŸ“·</div>
                                    <p class="text-sm">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</p>
                                </div>
                            </div>
                            <input type="file" id="imageUpload" accept="image/*" class="hidden">
                        </div>
                    </div>
                    <div class="text-xs text-slate-500">
                        ğŸ’¡ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹æ–¹çš„emojiå›¾æ ‡ä½œä¸ºå¥–å“å›¾ç‰‡
                    </div>

                    <!-- Emojié€‰æ‹©å™¨ -->
                    <div class="grid grid-cols-8 gap-2 p-3 bg-slate-50 rounded-xl">
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ§¸">ğŸ§¸</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ">ğŸ</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ’">ğŸ’</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸŒŸ">ğŸŒŸ</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ¨">ğŸ¨</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸª">ğŸª</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ­">ğŸ­</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ¯">ğŸ¯</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ²">ğŸ²</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ­">ğŸ­</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ°">ğŸ°</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ‚">ğŸ‚</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="â­">â­</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸ’«">ğŸ’«</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="âœ¨">âœ¨</button>
                        <button type="button" class="emoji-btn text-2xl p-2 rounded-lg hover:bg-white transition-colors"
                            data-emoji="ğŸŒˆ">ğŸŒˆ</button>
                    </div>
                </div>

                <!-- å¥–å“åç§° -->
                <div class="space-y-2">
                    <label for="prizeName" class="block text-sm font-medium text-slate-700">ğŸ·ï¸ å¥–å“åç§°</label>
                    <input type="text" id="prizeName" name="prizeName" placeholder="è¾“å…¥å¥–å“åç§°..."
                        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:border-[var(--labu)] focus:outline-none transition-colors">
                </div>

                <!-- å¥–å“æè¿° -->
                <div class="space-y-2">
                    <label for="prizeDescription" class="block text-sm font-medium text-slate-700">ğŸ“ å¥–å“æè¿°</label>
                    <textarea id="prizeDescription" name="prizeDescription" placeholder="æè¿°ä¸€ä¸‹è¿™ä¸ªå¥–å“..." rows="3"
                        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:border-[var(--labu)] focus:outline-none transition-colors resize-none"></textarea>
                </div>

                <!-- å¥–å“ä»·æ ¼ -->
                <div class="space-y-2">
                    <label for="prizePrice" class="block text-sm font-medium text-slate-700">ğŸ’° å¥–å“ä»·æ ¼</label>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500">ï¿¥</span>
                        <input type="number" id="prizePrice" name="prizePrice" placeholder="0" min="0" step="0.01"
                            class="w-full pl-8 pr-4 py-3 border border-slate-300 rounded-xl focus:border-[var(--labu)] focus:outline-none transition-colors">
                    </div>
                </div>

                <!-- å¥–å“åˆ†ç±» -->
                <div class="space-y-2">
                    <label for="prizeCategory" class="block text-sm font-medium text-slate-700">ğŸ“‚ å¥–å“åˆ†ç±»</label>
                    <select id="prizeCategory" name="prizeCategory"
                        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:border-[var(--labu)] focus:outline-none transition-colors">
                        <option value="custom">ğŸ’ è‡ªå®šä¹‰</option>
                        <option value="classic">â­ ç»å…¸ç³»åˆ—</option>
                        <option value="limited">ğŸ’ é™å®šæ¬¾</option>
                        <option value="blind">ğŸ ç›²ç›’ç³»åˆ—</option>
                        <option value="accessories">ğŸ‘œ å‘¨è¾¹é…ä»¶</option>
                    </select>
                </div>

                <!-- æŒ‰é’®ç»„ -->
                <div class="flex gap-3 pt-4">
                    <button type="button" id="cancelPrize"
                        class="flex-1 py-3 px-4 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button type="submit"
                        class="flex-1 py-3 px-4 bg-[var(--labu)] text-white rounded-xl hover:bg-opacity-90 transition-colors font-medium">
                        âœ¨ æ·»åŠ å¥–å“
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // å·¥å…·å‡½æ•°
        const $ = (selector) => document.querySelector(selector);
        const $$ = (selector) => document.querySelectorAll(selector);

        // å•†å“æ•°æ®
        const products = [
            {
                id: 1,
                name: "Labubu ç»å…¸æ¬¾å…¬ä»”",
                price: 89,
                originalPrice: 109,
                image: "ğŸ§¸",
                category: "classic",
                rating: 4.8,
                sales: 1234,
                description: "è¿ªå£«å°¼å®˜æ–¹æˆæƒç»å…¸æ¬¾",
                inStock: true
            },
            {
                id: 2,
                name: "Labubu å¤æ—¥æµ·æ»©ç³»åˆ—",
                price: 128,
                originalPrice: 158,
                image: "ğŸ–ï¸",
                category: "limited",
                rating: 4.9,
                sales: 856,
                description: "å¤æ—¥é™å®šï¼Œæ¸…çˆ½é…è‰²",
                inStock: true
            },
            {
                id: 3,
                name: "Labubu ç¥ç§˜ç›²ç›’",
                price: 45,
                originalPrice: 55,
                image: "ğŸ",
                category: "blind",
                rating: 4.7,
                sales: 2341,
                description: "12æ¬¾éšæœºï¼ŒæƒŠå–œæ»¡æ»¡",
                inStock: true
            },
            {
                id: 4,
                name: "Labubu åœ£è¯ç‰¹åˆ«ç‰ˆ",
                price: 198,
                originalPrice: 248,
                image: "ğŸ„",
                category: "limited",
                rating: 5.0,
                sales: 567,
                description: "åœ£è¯é™å®šï¼Œæ¸©é¦¨é…è‰²",
                inStock: false
            },
            {
                id: 5,
                name: "Labubu ç²‰è‰²æ¢¦å¹»æ¬¾",
                price: 156,
                originalPrice: 186,
                image: "ğŸ’–",
                category: "classic",
                rating: 4.8,
                sales: 789,
                description: "å°‘å¥³å¿ƒå¿…å¤‡ç²‰è‰²æ¬¾",
                inStock: true
            },
            {
                id: 6,
                name: "Labubu é’¥åŒ™æ‰£",
                price: 25,
                originalPrice: 35,
                image: "ğŸ”‘",
                category: "accessories",
                rating: 4.6,
                sales: 3456,
                description: "ç²¾ç¾é’¥åŒ™æ‰£ï¼Œéšèº«æºå¸¦",
                inStock: true
            },
            {
                id: 7,
                name: "Labubu å®‡å®™æ˜Ÿç©ºç³»åˆ—",
                price: 176,
                originalPrice: 216,
                image: "ğŸŒŒ",
                category: "limited",
                rating: 4.9,
                sales: 423,
                description: "æ˜Ÿç©ºä¸»é¢˜ï¼Œæ¢¦å¹»é…è‰²",
                inStock: true
            },
            {
                id: 8,
                name: "Labubu å­¦é™¢é£ä¹¦åŒ…",
                price: 88,
                originalPrice: 118,
                image: "ğŸ’",
                category: "accessories",
                rating: 4.7,
                sales: 654,
                description: "å­¦é™¢é£è®¾è®¡ï¼Œå®ç”¨ç¾è§‚",
                inStock: true
            },
            {
                id: 9,
                name: "Labubu å½©è™¹ç³»åˆ—",
                price: 134,
                originalPrice: 164,
                image: "ğŸŒˆ",
                category: "classic",
                rating: 4.8,
                sales: 987,
                description: "å½©è™¹é…è‰²ï¼Œå……æ»¡æ´»åŠ›",
                inStock: true
            },
            {
                id: 10,
                name: "Labubu å’–å•¡ä¸»é¢˜æ¬¾",
                price: 145,
                originalPrice: 175,
                image: "â˜•",
                category: "limited",
                rating: 4.7,
                sales: 345,
                description: "å’–å•¡ä¸»é¢˜ï¼Œæ¸©æš–è‰²è°ƒ",
                inStock: true
            },
            {
                id: 11,
                name: "Labubu ä¸‡åœ£èŠ‚ç³»åˆ—",
                price: 166,
                originalPrice: 196,
                image: "ğŸƒ",
                category: "limited",
                rating: 4.9,
                sales: 234,
                description: "ä¸‡åœ£èŠ‚é™å®šï¼Œç¥ç§˜é…è‰²",
                inStock: true
            },
            {
                id: 12,
                name: "Labubu æ‰‹æœºå£³",
                price: 39,
                originalPrice: 49,
                image: "ğŸ“±",
                category: "accessories",
                rating: 4.5,
                sales: 1876,
                description: "å¤šæ¬¾æ‰‹æœºé€‚é…ï¼Œä¿æŠ¤çˆ±æœº",
                inStock: true
            }
        ];

        let cart = [];
        let currentCategory = 'all';
        let currentSlide = 0;
        let userPrizes = JSON.parse(localStorage.getItem('userPrizes') || '[]');
        let currentImageData = null; // å­˜å‚¨å½“å‰é€‰æ‹©çš„å›¾ç‰‡æ•°æ®
        let selectedEmoji = null; // å­˜å‚¨å½“å‰é€‰æ‹©çš„emoji

        // åˆå§‹åŒ–
        function init() {
            renderProducts();
            initCarousel();
            initEventListeners();
            initCustomCursor();
            initPrizeModal();
            updateCartUI();
        }

        // æ¸²æŸ“å•†å“
        function renderProducts(productsToShow = null) {
            const grid = $('#productGrid');
            grid.innerHTML = '';

            // åˆå¹¶é»˜è®¤å•†å“å’Œç”¨æˆ·å¥–å“
            let allProducts = [...products];
            if (userPrizes.length > 0) {
                allProducts = [...products, ...userPrizes];
            }

            // å¦‚æœæ²¡æœ‰æŒ‡å®šè¦æ˜¾ç¤ºçš„å•†å“ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰å•†å“
            if (!productsToShow) {
                productsToShow = allProducts;
            }

            productsToShow.forEach(product => {
                const productCard = createProductCard(product);
                grid.appendChild(productCard);
            });

            $('#productCount').textContent = productsToShow.length;
        }

        // åˆ›å»ºå•†å“å¡ç‰‡
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card bg-white rounded-2xl p-4 shadow-sm border border-slate-200';

            const isUserPrize = product.isUserPrize || false;
            const discount = product.originalPrice ? Math.round((1 - product.price / product.originalPrice) * 100) : 0;
            const stars = 'â­'.repeat(Math.floor(product.rating || 5));
            const sales = product.sales || 0;

            // å¤„ç†å›¾ç‰‡æ˜¾ç¤º
            let imageDisplay;
            if (isUserPrize && product.imageData) {
                // ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼ˆBase64ï¼‰
                imageDisplay = `<img src="${product.imageData}" alt="${product.name}" class="w-full h-20 object-cover rounded-lg">`;
            } else if (product.image) {
                // æ£€æŸ¥æ˜¯å¦æ˜¯emojiæˆ–å›¾ç‰‡URL
                if (product.image.length <= 4) {
                    // å¯èƒ½æ˜¯emoji
                    imageDisplay = `<div class="text-6xl">${product.image}</div>`;
                } else {
                    // å¯èƒ½æ˜¯å›¾ç‰‡URL
                    imageDisplay = `<img src="${product.image}" alt="${product.name}" class="w-full h-20 object-cover rounded-lg">`;
                }
            } else {
                imageDisplay = `<div class="text-6xl">ğŸ</div>`;
            }

            card.innerHTML = `
                <div class="relative mb-3">
                    <div class="product-image text-center py-6 bg-slate-50 rounded-xl flex items-center justify-center">
                        ${imageDisplay}
                    </div>
                    ${discount > 0 ? `<div class="absolute top-2 left-2 price-tag text-white text-xs px-2 py-1 rounded-full">
                        -${discount}%
                    </div>` : ''}
                    ${!product.inStock ? '<div class="absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center text-white font-medium">æš‚æ—¶ç¼ºè´§</div>' : ''}
                    ${isUserPrize ? '<div class="absolute top-2 right-2 bg-purple-500 text-white text-xs px-2 py-1 rounded-full">è‡ªå®šä¹‰</div>' : ''}
                </div>
                
                <div class="space-y-2">
                    <div class="category-tag text-center">${getCategoryName(product.category)}</div>
                    <h3 class="font-medium text-sm leading-tight">${product.name}</h3>
                    <p class="text-xs text-slate-500">${product.description}</p>
                    
                    <div class="flex items-center gap-1 text-xs">
                        <span class="stars">${stars}</span>
                        <span class="text-slate-500">(${sales})</span>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div>
                            <span class="text-lg font-bold text-[var(--labu)]">ï¿¥${product.price}</span>
                            ${product.originalPrice && product.originalPrice > product.price ? `<span class="text-xs text-slate-400 line-through ml-1">ï¿¥${product.originalPrice}</span>` : ''}
                        </div>
                    </div>
                    
                    ${isUserPrize ? `
                        <div class="flex gap-2">
                            <button class="enhanced-btn flex-1 py-2 bg-blue-500 text-white rounded-xl text-sm font-medium" 
                                    onclick="editUserPrize('${product.id}')">
                                âœï¸ ç¼–è¾‘
                            </button>
                            <button class="enhanced-btn flex-1 py-2 bg-red-500 text-white rounded-xl text-sm font-medium" 
                                    onclick="deleteUserPrize('${product.id}')">
                                ğŸ—‘ï¸ åˆ é™¤
                            </button>
                        </div>
                    ` : `
                        <button class="enhanced-btn w-full py-2 bg-[var(--labu)] text-white rounded-xl text-sm font-medium ${!product.inStock ? 'opacity-50 cursor-not-allowed' : ''}" 
                                onclick="addToCart(${product.id})" ${!product.inStock ? 'disabled' : ''}>
                            ${product.inStock ? 'ğŸ›’ åŠ å…¥è´­ç‰©è½¦' : 'æš‚æ—¶ç¼ºè´§'}
                        </button>
                    `}
                </div>
            `;

            return card;
        }

        // è·å–åˆ†ç±»åç§°
        function getCategoryName(category) {
            const names = {
                'custom': 'è‡ªå®šä¹‰',
                'classic': 'ç»å…¸',
                'limited': 'é™å®š',
                'blind': 'ç›²ç›’',
                'accessories': 'é…ä»¶'
            };
            return names[category] || 'å•†å“';
        }

        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || !product.inStock) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            updateCartUI();
            showAddToCartEffect();
        }

        // æ›´æ–°è´­ç‰©è½¦UI
        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            $('#cartCount').textContent = totalItems;
            $('#cartTotal').textContent = `ï¿¥${totalPrice}`;

            renderCartItems();
        }

        // æ¸²æŸ“è´­ç‰©è½¦å•†å“
        function renderCartItems() {
            const container = $('#cartItems');

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-slate-400 py-8">
                        <div class="text-4xl mb-2">ğŸ›’</div>
                        <p>è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ</p>
                        <p class="text-sm mt-1">å¿«å»æŒ‘é€‰ä½ å–œæ¬¢çš„Labubuå§ï¼</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = cart.map(item => `
                <div class="flex items-center gap-3 py-3 border-b border-slate-100">
                    <div class="text-2xl">${item.image}</div>
                    <div class="flex-1">
                        <h4 class="text-sm font-medium">${item.name}</h4>
                        <div class="text-xs text-slate-500">ï¿¥${item.price} Ã— ${item.quantity}</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="updateCartQuantity(${item.id}, -1)" class="w-6 h-6 rounded-full bg-slate-200 text-slate-600 text-xs">-</button>
                        <span class="text-sm">${item.quantity}</span>
                        <button onclick="updateCartQuantity(${item.id}, 1)" class="w-6 h-6 rounded-full bg-slate-200 text-slate-600 text-xs">+</button>
                    </div>
                </div>
            `).join('');
        }

        // æ›´æ–°è´­ç‰©è½¦å•†å“æ•°é‡
        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (!item) return;

            item.quantity += change;
            if (item.quantity <= 0) {
                cart = cart.filter(item => item.id !== productId);
            }

            updateCartUI();
        }

        // æ˜¾ç¤ºåŠ å…¥è´­ç‰©è½¦æ•ˆæœ
        function showAddToCartEffect() {
            // åˆ›å»ºé£å…¥åŠ¨ç”»æ•ˆæœ
            const effect = document.createElement('div');
            effect.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg z-50 transform translate-x-full transition-transform duration-300';
            effect.textContent = 'âœ… å·²æ·»åŠ åˆ°è´­ç‰©è½¦';
            document.body.appendChild(effect);

            setTimeout(() => {
                effect.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                effect.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(effect)) {
                        document.body.removeChild(effect);
                    }
                }, 300);
            }, 2000);
        }

        // åˆå§‹åŒ–è½®æ’­å›¾
        function initCarousel() {
            const carousel = $('#carousel');
            const dots = $$('.carousel-dot');

            function updateCarousel() {
                carousel.style.transform = `translateX(-${currentSlide * 100}%)`;
                dots.forEach((dot, index) => {
                    dot.style.backgroundColor = index === currentSlide ? 'white' : 'rgba(255,255,255,0.5)';
                });
            }

            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentSlide = index;
                    updateCarousel();
                });
            });

            // è‡ªåŠ¨è½®æ’­
            setInterval(() => {
                currentSlide = (currentSlide + 1) % 3;
                updateCarousel();
            }, 4000);

            updateCarousel();
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initEventListeners() {
            // åˆ†ç±»ç­›é€‰
            $$('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    currentCategory = btn.dataset.category;
                    filterProducts();

                    // æ›´æ–°æ´»è·ƒçŠ¶æ€
                    $$('.category-btn').forEach(b => b.classList.remove('bg-[var(--labu)]', 'text-white'));
                    btn.classList.add('bg-[var(--labu)]', 'text-white');
                });
            });

            // è´­ç‰©è½¦ä¾§è¾¹æ 
            $('#cartBtn').addEventListener('click', () => {
                $('#cartSidebar').style.transform = 'translateX(0)';
                $('#cartOverlay').classList.remove('hidden');
            });

            $('#closeCart').addEventListener('click', closeCart);
            $('#cartOverlay').addEventListener('click', closeCart);

            // æœç´¢
            $('#searchInput').addEventListener('input', filterProducts);

            // ç­›é€‰å’Œæ’åº
            $('#priceFilter').addEventListener('change', filterProducts);
            $('#sortBy').addEventListener('change', filterProducts);
        }

        function closeCart() {
            $('#cartSidebar').style.transform = 'translateX(100%)';
            $('#cartOverlay').classList.add('hidden');
        }

        // ç­›é€‰å•†å“
        function filterProducts() {
            // åˆå¹¶æ‰€æœ‰å•†å“
            let allProducts = [...products, ...userPrizes];
            let filtered = allProducts;

            // åˆ†ç±»ç­›é€‰
            if (currentCategory !== 'all') {
                filtered = filtered.filter(p => p.category === currentCategory);
            }

            // æœç´¢ç­›é€‰
            const searchTerm = $('#searchInput').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(p =>
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.description.toLowerCase().includes(searchTerm)
                );
            }

            // ä»·æ ¼ç­›é€‰
            const priceFilter = $('#priceFilter').value;
            if (priceFilter !== 'all') {
                const [min, max] = priceFilter.split('-').map(n => n === '' ? Infinity : parseInt(n));
                filtered = filtered.filter(p => p.price >= min && (max === Infinity || p.price <= max));
            }

            // æ’åº
            const sortBy = $('#sortBy').value;
            switch (sortBy) {
                case 'price-low':
                    filtered.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filtered.sort((a, b) => b.price - a.price);
                    break;
                case 'rating':
                    filtered.sort((a, b) => (b.rating || 5) - (a.rating || 5));
                    break;
                case 'sales':
                    filtered.sort((a, b) => (b.sales || 0) - (a.sales || 0));
                    break;
            }

            renderProducts(filtered);
        }

        // è‡ªå®šä¹‰é¼ æ ‡æ•ˆæœ
        function initCustomCursor() {
            const cursor = $('.custom-cursor');
            let mouseX = 0, mouseY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                cursor.style.left = mouseX + 'px';
                cursor.style.top = mouseY + 'px';

                createCursorTrail(mouseX, mouseY);
            });

            document.addEventListener('mousedown', () => {
                cursor.classList.add('clicking');
                createMagicParticles(mouseX, mouseY);
            });

            document.addEventListener('mouseup', () => {
                cursor.classList.remove('clicking');
            });
        }

        function createCursorTrail(x, y) {
            const trail = document.createElement('div');
            trail.className = 'cursor-trail';
            trail.style.left = (x - 4) + 'px';
            trail.style.top = (y - 4) + 'px';
            document.body.appendChild(trail);

            setTimeout(() => {
                if (document.body.contains(trail)) {
                    document.body.removeChild(trail);
                }
            }, 500);
        }

        function createMagicParticles(x, y) {
            for (let i = 0; i < 6; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'magic-particle';
                    particle.style.left = (x + Math.random() * 40 - 20) + 'px';
                    particle.style.top = (y + Math.random() * 40 - 20) + 'px';
                    document.body.appendChild(particle);

                    setTimeout(() => {
                        if (document.body.contains(particle)) {
                            document.body.removeChild(particle);
                        }
                    }, 2000);
                }, i * 50);
            }
        }

        // ç”¨æˆ·å¥–å“ç®¡ç†åŠŸèƒ½
        function initPrizeModal() {
            const modal = $('#addPrizeModal');
            const addBtn = $('#addPrizeBtn');
            const closeBtn = $('#closePrizeModal');
            const cancelBtn = $('#cancelPrize');
            const form = $('#addPrizeForm');
            const imagePreview = $('#imagePreview');
            const imageUpload = $('#imageUpload');

            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            addBtn.addEventListener('click', () => {
                modal.classList.remove('hidden');
                resetForm();
            });

            // éšè—æ¨¡æ€æ¡†
            closeBtn.addEventListener('click', () => {
                modal.classList.add('hidden');
            });

            cancelBtn.addEventListener('click', () => {
                modal.classList.add('hidden');
            });

            // ç‚¹å‡»é®ç½©å…³é—­
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });

            // å›¾ç‰‡ä¸Šä¼ 
            imagePreview.addEventListener('click', () => {
                imageUpload.click();
            });

            imageUpload.addEventListener('change', handleImageUpload);

            // Emojié€‰æ‹©
            $$('.emoji-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    selectEmoji(btn.dataset.emoji);
                });
            });

            // è¡¨å•æäº¤
            form.addEventListener('submit', handleFormSubmit);
        }

        function handleImageUpload(e) {
            const file = e.target.files[0];
            if (!file) return;

            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    currentImageData = e.target.result;
                    selectedEmoji = null;
                    updateImagePreview();
                };
                reader.readAsDataURL(file);
            } else {
                alert('è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶ï¼');
            }
        }

        function selectEmoji(emoji) {
            selectedEmoji = emoji;
            currentImageData = null;
            updateImagePreview();

            // æ›´æ–°é€‰ä¸­çŠ¶æ€
            $$('.emoji-btn').forEach(btn => {
                btn.classList.remove('bg-[var(--labu)]', 'text-white');
            });

            const selectedBtn = $(`.emoji-btn[data-emoji="${emoji}"]`);
            if (selectedBtn) {
                selectedBtn.classList.add('bg-[var(--labu)]', 'text-white');
            }
        }

        function updateImagePreview() {
            const preview = $('#imagePreview');

            if (currentImageData) {
                preview.innerHTML = `<img src="${currentImageData}" alt="é¢„è§ˆ" class="w-full h-full object-cover rounded-xl">`;
            } else if (selectedEmoji) {
                preview.innerHTML = `<div class="text-6xl">${selectedEmoji}</div>`;
            } else {
                preview.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-2">ğŸ“·</div>
                        <p class="text-sm">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</p>
                    </div>
                `;
            }
        }

        function handleFormSubmit(e) {
            e.preventDefault();

            const formData = new FormData(e.target);
            const name = formData.get('prizeName').trim();
            const description = formData.get('prizeDescription').trim();
            const price = parseFloat(formData.get('prizePrice')) || 0;
            const category = formData.get('prizeCategory');

            // éªŒè¯è¡¨å•
            if (!name) {
                alert('è¯·è¾“å…¥å¥–å“åç§°ï¼');
                return;
            }

            if (!currentImageData && !selectedEmoji) {
                alert('è¯·é€‰æ‹©å¥–å“å›¾ç‰‡æˆ–emojiï¼');
                return;
            }

            // åˆ›å»ºæ–°å¥–å“
            const newPrize = {
                id: 'user_' + Date.now(),
                name: name,
                description: description || 'ç”¨æˆ·è‡ªå®šä¹‰å¥–å“',
                price: price,
                originalPrice: null,
                image: selectedEmoji || null,
                imageData: currentImageData || null,
                category: category,
                rating: 5,
                sales: 0,
                inStock: true,
                isUserPrize: true
            };

            // ä¿å­˜åˆ°ç”¨æˆ·å¥–å“åˆ—è¡¨
            userPrizes.push(newPrize);
            saveUserPrizes();

            // å…³é—­æ¨¡æ€æ¡†å¹¶åˆ·æ–°æ˜¾ç¤º
            $('#addPrizeModal').classList.add('hidden');
            renderProducts();

            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            showSuccessMessage('âœ… å¥–å“æ·»åŠ æˆåŠŸï¼');
        }

        function editUserPrize(prizeId) {
            const prize = userPrizes.find(p => p.id === prizeId);
            if (!prize) return;

            // å¡«å……è¡¨å•
            $('#prizeName').value = prize.name;
            $('#prizeDescription').value = prize.description;
            $('#prizePrice').value = prize.price;
            $('#prizeCategory').value = prize.category;

            // è®¾ç½®å›¾ç‰‡
            if (prize.imageData) {
                currentImageData = prize.imageData;
                selectedEmoji = null;
            } else if (prize.image) {
                selectedEmoji = prize.image;
                currentImageData = null;
            }
            updateImagePreview();

            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            $('#addPrizeModal').classList.remove('hidden');

            // ä¿®æ”¹è¡¨å•æäº¤å¤„ç†
            const form = $('#addPrizeForm');
            form.onsubmit = (e) => {
                e.preventDefault();

                const formData = new FormData(e.target);
                const name = formData.get('prizeName').trim();
                const description = formData.get('prizeDescription').trim();
                const price = parseFloat(formData.get('prizePrice')) || 0;
                const category = formData.get('prizeCategory');

                if (!name) {
                    alert('è¯·è¾“å…¥å¥–å“åç§°ï¼');
                    return;
                }

                // æ›´æ–°å¥–å“ä¿¡æ¯
                prize.name = name;
                prize.description = description || 'ç”¨æˆ·è‡ªå®šä¹‰å¥–å“';
                prize.price = price;
                prize.category = category;
                prize.image = selectedEmoji || prize.image;
                prize.imageData = currentImageData || prize.imageData;

                saveUserPrizes();
                $('#addPrizeModal').classList.add('hidden');
                renderProducts();
                showSuccessMessage('âœ… å¥–å“æ›´æ–°æˆåŠŸï¼');

                // æ¢å¤åŸå§‹æäº¤å¤„ç†
                form.onsubmit = handleFormSubmit;
            };
        }

        function deleteUserPrize(prizeId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¥–å“å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                userPrizes = userPrizes.filter(p => p.id !== prizeId);
                saveUserPrizes();
                renderProducts();
                showSuccessMessage('ğŸ—‘ï¸ å¥–å“å·²åˆ é™¤ï¼');
            }
        }

        function saveUserPrizes() {
            localStorage.setItem('userPrizes', JSON.stringify(userPrizes));
        }

        function resetForm() {
            $('#addPrizeForm').reset();
            currentImageData = null;
            selectedEmoji = null;
            updateImagePreview();

            // æ¸…é™¤emojié€‰ä¸­çŠ¶æ€
            $$('.emoji-btn').forEach(btn => {
                btn.classList.remove('bg-[var(--labu)]', 'text-white');
            });
        }

        function showSuccessMessage(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg z-50 transform translate-x-full transition-transform duration-300';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>