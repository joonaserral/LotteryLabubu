# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ä¸æŠ€æœ¯è¯´æ˜

## ğŸ“‹ æŠ€æœ¯æ ˆæ¦‚è§ˆ

### å‰ç«¯æŠ€æœ¯
- **HTML5**ï¼šè¯­ä¹‰åŒ–æ ‡è®°ï¼Œæä¾›è‰¯å¥½çš„é¡µé¢ç»“æ„
- **CSS3**ï¼šç°ä»£CSSç‰¹æ€§ï¼ŒåŒ…æ‹¬Gridã€Flexboxã€åŠ¨ç”»ç­‰
- **JavaScript ES6+**ï¼šç°ä»£JavaScriptç‰¹æ€§ï¼Œæ¨¡å—åŒ–å¼€å‘
- **Tailwind CSS**ï¼šå®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **Web APIs**ï¼šLocalStorageã€BroadcastChannelã€Audio APIç­‰

### è®¾è®¡æ¨¡å¼
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šåŠŸèƒ½æŒ‰æ¨¡å—ç»„ç»‡ï¼Œä¾¿äºç»´æŠ¤
- **äº‹ä»¶é©±åŠ¨**ï¼šåŸºäºäº‹ä»¶çš„äº¤äº’æ¨¡å¼
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§è®¾å¤‡å°ºå¯¸
- **æ¸è¿›å¢å¼º**ï¼šåŸºç¡€åŠŸèƒ½ä¼˜å…ˆï¼Œå¢å¼ºåŠŸèƒ½å¯é€‰

## ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

### 1. æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯å±•ç¤ºå±‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ index.html    â”‚ user-center.html â”‚ ...   â”‚
â”‚ (ä¸»æŠ½å¥–ç³»ç»Ÿ)   â”‚ (ç”¨æˆ·ä¸­å¿ƒ)        â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ä¸šåŠ¡é€»è¾‘å±‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æŠ½å¥–ç®—æ³• â”‚ ç”¨æˆ·ç®¡ç† â”‚ éŸ³ä¹æ’­æ”¾ â”‚ æƒé™æ§åˆ¶ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ•°æ®å­˜å‚¨å±‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LocalStorage â”‚ SessionStorage â”‚ å†…å­˜ç¼“å­˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              åŸºç¡€è®¾æ–½å±‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æµè§ˆå™¨API â”‚ ç½‘ç»œè¯·æ±‚ â”‚ æ–‡ä»¶ç³»ç»Ÿ â”‚ å®‰å…¨æœºåˆ¶ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ¨¡å—ç»“æ„

#### æ ¸å¿ƒæ¨¡å—
- **æŠ½å¥–å¼•æ“** (`LotteryEngine`)
- **ç”¨æˆ·ç®¡ç†** (`UserManager`)
- **éŸ³ä¹æ’­æ”¾** (`MusicPlayer`)
- **æ•°æ®åŒæ­¥** (`DataSync`)
- **æƒé™éªŒè¯** (`AuthValidator`)

#### å·¥å…·æ¨¡å—
- **å·¥å…·å‡½æ•°** (`Utils`)
- **åŠ¨ç”»ç³»ç»Ÿ** (`AnimationSystem`)
- **é€šçŸ¥ç³»ç»Ÿ** (`NotificationSystem`)
- **å­˜å‚¨ç®¡ç†** (`StorageManager`)

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯å®ç°

### 1. æŠ½å¥–ç®—æ³•

#### æƒé‡éšæœºç®—æ³•
```javascript
class LotteryEngine {
    constructor(prizePool) {
        this.prizePool = prizePool;
        this.totalWeight = this.calculateTotalWeight();
    }
    
    calculateTotalWeight() {
        return this.prizePool.reduce((sum, prize) => {
            return sum + (prize.quantity > 0 ? prize.weight : 0);
        }, 0);
    }
    
    drawPrize() {
        const random = Math.random() * this.totalWeight;
        let currentWeight = 0;
        
        for (const prize of this.prizePool) {
            if (prize.quantity <= 0) continue;
            
            currentWeight += prize.weight;
            if (random <= currentWeight) {
                return this.processPrizeWin(prize);
            }
        }
        
        return null; // ç†è®ºä¸Šä¸ä¼šåˆ°è¾¾è¿™é‡Œ
    }
    
    processPrizeWin(prize) {
        // å‡å°‘åº“å­˜
        prize.quantity--;
        
        // è®°å½•å†å²
        this.recordHistory(prize);
        
        // æ›´æ–°ç»Ÿè®¡
        this.updateStatistics(prize);
        
        return prize;
    }
}
```

### 2. æ•°æ®ç®¡ç†

#### æœ¬åœ°å­˜å‚¨å°è£…
```javascript
class StorageManager {
    static set(key, value) {
        try {
            localStorage.setItem(key, JSON.stringify(value));
            this.notifyChange(key, value);
        } catch (error) {
            console.error('å­˜å‚¨å¤±è´¥:', error);
        }
    }
    
    static get(key, defaultValue = null) {
        try {
            const value = localStorage.getItem(key);
            return value ? JSON.parse(value) : defaultValue;
        } catch (error) {
            console.error('è¯»å–å¤±è´¥:', error);
            return defaultValue;
        }
    }
    
    static notifyChange(key, value) {
        // é€šçŸ¥å…¶ä»–é¡µé¢æ•°æ®å˜åŒ–
        if (window.dataChannel) {
            window.dataChannel.postMessage({
                type: 'storage_change',
                key,
                value,
                timestamp: Date.now()
            });
        }
    }
}
```

#### è·¨é¡µé¢æ•°æ®åŒæ­¥
```javascript
class DataSyncManager {
    constructor() {
        this.channel = null;
        this.lastUpdateTime = {};
        this.initChannel();
    }
    
    initChannel() {
        if ('BroadcastChannel' in window) {
            this.channel = new BroadcastChannel('labubu_data_sync');
            this.channel.addEventListener('message', this.handleMessage.bind(this));
        }
    }
    
    handleMessage(event) {
        const { type, key, value, timestamp } = event.data;
        
        // é˜²æ­¢é‡å¤æ›´æ–°
        if (this.lastUpdateTime[key] >= timestamp) return;
        
        this.lastUpdateTime[key] = timestamp;
        
        switch (type) {
            case 'storage_change':
                this.updateLocalData(key, value);
                break;
            case 'lottery_result':
                this.handleLotteryUpdate(value);
                break;
        }
    }
}
```

### 3. éŸ³ä¹æ’­æ”¾ç³»ç»Ÿ

#### éŸ³é¢‘ç®¡ç†å™¨
```javascript
class MusicManager {
    constructor() {
        this.currentAudio = null;
        this.playlist = [];
        this.currentIndex = 0;
        this.isPlaying = false;
        this.volume = 0.5;
    }
    
    async loadPlaylist(musicLibrary) {
        this.playlist = musicLibrary;
        if (this.playlist.length > 0) {
            await this.loadTrack(0);
        }
    }
    
    async loadTrack(index) {
        if (this.currentAudio) {
            this.currentAudio.pause();
            this.currentAudio = null;
        }
        
        const track = this.playlist[index];
        if (!track || !track.url) return;
        
        this.currentAudio = new Audio(track.url);
        this.currentAudio.volume = this.volume;
        this.currentIndex = index;
        
        // ç»‘å®šäº‹ä»¶
        this.bindAudioEvents();
        
        return new Promise((resolve, reject) => {
            this.currentAudio.addEventListener('loadeddata', resolve);
            this.currentAudio.addEventListener('error', reject);
        });
    }
    
    bindAudioEvents() {
        this.currentAudio.addEventListener('ended', () => {
            this.next();
        });
        
        this.currentAudio.addEventListener('timeupdate', () => {
            this.updateProgress();
        });
        
        this.currentAudio.addEventListener('error', (error) => {
            console.error('éŸ³é¢‘æ’­æ”¾é”™è¯¯:', error);
            this.next(); // è‡ªåŠ¨è·³åˆ°ä¸‹ä¸€é¦–
        });
    }
}
```

### 4. ç”¨æˆ·ç•Œé¢ç³»ç»Ÿ

#### åŠ¨ç”»ç³»ç»Ÿ
```javascript
class AnimationSystem {
    static createParticleEffect(x, y, type = 'normal') {
        const particle = document.createElement('div');
        particle.className = `particle particle-${type}`;
        
        // è®¾ç½®åˆå§‹ä½ç½®
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        
        // æ·»åŠ åˆ°DOM
        document.body.appendChild(particle);
        
        // åŠ¨ç”»ç»“æŸåæ¸…ç†
        particle.addEventListener('animationend', () => {
            if (document.body.contains(particle)) {
                document.body.removeChild(particle);
            }
        });
        
        return particle;
    }
    
    static createLotteryAnimation(prize) {
        const rarity = prize.rarity;
        const animations = {
            common: () => this.commonAnimation(prize),
            rare: () => this.rareAnimation(prize),
            epic: () => this.epicAnimation(prize),
            legendary: () => this.legendaryAnimation(prize),
            mythic: () => this.mythicAnimation(prize)
        };
        
        return animations[rarity] || animations.common;
    }
}
```

#### å“åº”å¼è®¾è®¡
```css
/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
    .lottery-container {
        padding: 1rem;
        margin: 0.5rem;
    }
    
    .prize-card {
        width: 100%;
        max-width: 300px;
    }
    
    #musicPlayer {
        width: 280px;
        bottom: 20px;
        right: 20px;
    }
}

/* å¹³æ¿é€‚é… */
@media (min-width: 769px) and (max-width: 1024px) {
    .lottery-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* æ¡Œé¢ç«¯é€‚é… */
@media (min-width: 1025px) {
    .lottery-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}
```

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. æƒé™éªŒè¯

#### VIPæƒé™æ£€æŸ¥
```javascript
class AuthValidator {
    static checkVIPAccess() {
        try {
            // æ£€æŸ¥é…ç½®å¯¹è±¡
            if (!window._secureConfig) return false;
            
            // åŸŸåéªŒè¯
            if (!this.validateDomain()) return false;
            
            // æ—¶é—´æˆ³éªŒè¯
            if (!this.validateTimestamp()) return false;
            
            return true;
        } catch (error) {
            console.error('æƒé™éªŒè¯å¤±è´¥:', error);
            return false;
        }
    }
    
    static validateDomain() {
        const allowedDomains = [
            'localhost',
            '127.0.0.1',
            'labubu-lottery.com'
        ];
        
        return allowedDomains.some(domain => 
            window.location.hostname.includes(domain)
        );
    }
}
```

### 2. æ•°æ®ä¿æŠ¤

#### é…ç½®åŠ å¯†
```javascript
// config.enc.js - åŠ å¯†é…ç½®æ–‡ä»¶
(function() {
    const encryptedConfig = "åŠ å¯†åçš„é…ç½®æ•°æ®";
    
    window._secureConfig = {
        validate() {
            return this.decrypt(encryptedConfig);
        },
        
        decrypt(data) {
            // ç®€å•çš„è§£å¯†é€»è¾‘
            try {
                const decoded = atob(data);
                const config = JSON.parse(decoded);
                return this.validateConfig(config);
            } catch {
                return false;
            }
        }
    };
})();
```

### 3. é˜²ä½œå¼Šæªæ–½

#### æ“ä½œé™åˆ¶
```javascript
class AntiCheatSystem {
    constructor() {
        this.operationHistory = [];
        this.lastOperationTime = 0;
        this.suspiciousCount = 0;
    }
    
    validateOperation(operation) {
        const now = Date.now();
        const timeDiff = now - this.lastOperationTime;
        
        // æ£€æŸ¥æ“ä½œé¢‘ç‡
        if (timeDiff < 1000) { // 1ç§’å†…ä¸èƒ½é‡å¤æ“ä½œ
            this.suspiciousCount++;
            if (this.suspiciousCount > 5) {
                this.blockUser();
                return false;
            }
        }
        
        // è®°å½•æ“ä½œ
        this.recordOperation(operation, now);
        this.lastOperationTime = now;
        
        return true;
    }
    
    blockUser() {
        alert('æ£€æµ‹åˆ°å¼‚å¸¸æ“ä½œï¼Œè¯·ç¨åå†è¯•');
        // ä¸´æ—¶é˜»æ­¢æ“ä½œ
        setTimeout(() => {
            this.suspiciousCount = 0;
        }, 60000); // 1åˆ†é’Ÿåè§£é™¤
    }
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. èµ„æºä¼˜åŒ–

#### å›¾ç‰‡æ‡’åŠ è½½
```javascript
class ImageLazyLoader {
    static init() {
        const images = document.querySelectorAll('img[data-src]');
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    imageObserver.unobserve(img);
                }
            });
        });
        
        images.forEach(img => imageObserver.observe(img));
    }
}
```

#### ä»£ç åˆ†å‰²
```javascript
// æŒ‰éœ€åŠ è½½åŠŸèƒ½æ¨¡å—
async function loadModule(moduleName) {
    const modules = {
        achievements: () => import('./modules/achievements.js'),
        games: () => import('./modules/games.js'),
        shop: () => import('./modules/shop.js')
    };
    
    if (modules[moduleName]) {
        const module = await modules[moduleName]();
        return module.default;
    }
    
    throw new Error(`Module ${moduleName} not found`);
}
```

### 2. å†…å­˜ç®¡ç†

#### äº‹ä»¶ç›‘å¬å™¨æ¸…ç†
```javascript
class EventManager {
    constructor() {
        this.listeners = new Map();
    }
    
    addEventListener(element, event, handler) {
        const key = `${element}_${event}`;
        
        // æ¸…ç†ä¹‹å‰çš„ç›‘å¬å™¨
        if (this.listeners.has(key)) {
            const oldHandler = this.listeners.get(key);
            element.removeEventListener(event, oldHandler);
        }
        
        // æ·»åŠ æ–°ç›‘å¬å™¨
        element.addEventListener(event, handler);
        this.listeners.set(key, handler);
    }
    
    cleanup() {
        this.listeners.forEach((handler, key) => {
            const [element, event] = key.split('_');
            element.removeEventListener(event, handler);
        });
        this.listeners.clear();
    }
}
```

## ğŸ” è°ƒè¯•ä¸ç›‘æ§

### 1. æ—¥å¿—ç³»ç»Ÿ

#### ç»Ÿä¸€æ—¥å¿—ç®¡ç†
```javascript
class Logger {
    static levels = {
        DEBUG: 0,
        INFO: 1,
        WARN: 2,
        ERROR: 3
    };
    
    static currentLevel = this.levels.INFO;
    
    static log(level, message, data = null) {
        if (level < this.currentLevel) return;
        
        const timestamp = new Date().toISOString();
        const levelName = Object.keys(this.levels)[level];
        
        console.log(`[${timestamp}] ${levelName}: ${message}`, data);
        
        // è®°å½•åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆç”¨äºè°ƒè¯•ï¼‰
        this.saveToStorage(level, message, data);
    }
    
    static debug(message, data) {
        this.log(this.levels.DEBUG, message, data);
    }
    
    static info(message, data) {
        this.log(this.levels.INFO, message, data);
    }
    
    static warn(message, data) {
        this.log(this.levels.WARN, message, data);
    }
    
    static error(message, data) {
        this.log(this.levels.ERROR, message, data);
    }
}
```

### 2. é”™è¯¯å¤„ç†

#### å…¨å±€é”™è¯¯æ•è·
```javascript
// å…¨å±€é”™è¯¯å¤„ç†
window.addEventListener('error', (event) => {
    Logger.error('å…¨å±€é”™è¯¯', {
        message: event.message,
        filename: event.filename,
        lineno: event.lineno,
        colno: event.colno,
        error: event.error
    });
});

// Promiseé”™è¯¯å¤„ç†
window.addEventListener('unhandledrejection', (event) => {
    Logger.error('æœªå¤„ç†çš„Promiseæ‹’ç»', {
        reason: event.reason
    });
});
```

## ğŸš€ éƒ¨ç½²æ¶æ„

### 1. é™æ€éƒ¨ç½²

#### æ–‡ä»¶ç»“æ„ä¼˜åŒ–
```
build/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ user-center.html
â”‚   â””â”€â”€ ...
â””â”€â”€ config/
    â”œâ”€â”€ app.config.js
    â””â”€â”€ auth.config.js
```

#### CDNé…ç½®
```javascript
const CDN_CONFIG = {
    images: 'https://cdn.labubu.com/images/',
    audio: 'https://cdn.labubu.com/audio/',
    static: 'https://cdn.labubu.com/static/'
};
```

### 2. ç¯å¢ƒé…ç½®

#### å¤šç¯å¢ƒæ”¯æŒ
```javascript
class EnvironmentConfig {
    static getConfig() {
        const hostname = window.location.hostname;
        
        const configs = {
            'localhost': this.developmentConfig,
            'staging.labubu.com': this.stagingConfig,
            'labubu.com': this.productionConfig
        };
        
        return configs[hostname] || this.developmentConfig;
    }
    
    static developmentConfig = {
        debug: true,
        apiUrl: 'http://localhost:3000',
        logLevel: 'DEBUG'
    };
    
    static productionConfig = {
        debug: false,
        apiUrl: 'https://api.labubu.com',
        logLevel: 'ERROR'
    };
}
```

## ğŸ”® æŠ€æœ¯è§„åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] å¼•å…¥TypeScriptå¢å¼ºç±»å‹å®‰å…¨
- [ ] å®ç°PWAç¦»çº¿åŠŸèƒ½
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] ä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦

### é•¿æœŸç›®æ ‡
- [ ] è¿ç§»åˆ°ç°ä»£æ¡†æ¶ï¼ˆVue/Reactï¼‰
- [ ] å®ç°æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰
- [ ] æ·»åŠ å®æ—¶é€šä¿¡åŠŸèƒ½
- [ ] å¼•å…¥å¾®å‰ç«¯æ¶æ„

---

ğŸ—ï¸ æŒç»­æ”¹è¿›ï¼Œè¿½æ±‚å“è¶Šçš„æŠ€æœ¯å“è´¨ï¼